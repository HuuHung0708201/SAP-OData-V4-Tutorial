<mvc:View
    controllerName="base.controller.Step08"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc">
    <Shell>
        <App busy="{appView>/busy}" class="sapUiSizeCompact">
            <pages>
                <Page title="{i18n>TextStep08}" showNavButton="true"
                    navButtonPress=".onNavBack">
                    <headerContent>
                        <Button
							id="resetChangesButton"
							text="{i18n>resetChangesButtonText}"
							enabled="{= !${appView>/hasUIChanges}}"
							press="onResetDataSource"
							type="Emphasized">
						</Button>
                    </headerContent>
                    <content>
                        <Table
                            id="peopleList"
                            growing="true"
                            growingThreshold="5"
                            items="{ path: '/People',
                            parameters: {
									$count: true,
                                    $$updateGroupId : 'peopleGroup'
								}
                             }"
                            mode="SingleSelectLeft"
                            >
                            <headerToolbar>
                                <OverflowToolbar>
                                    <content>
                                        <ToolbarSpacer/>
                                        <SearchField
											id="searchField"
											width="20%"
											placeholder="{i18n>searchFieldPlaceholder}"
                                            enabled="{= !${appView>/hasUIChanges} }"
											search=".onSearch"/>
                                        <Button
                                            id="addUserButton"
                                            icon="sap-icon://add"
                                            tooltip="{i18n>createButtonText}"
                                            press=".onCreate">
                                            <layoutData>
                                                <OverflowToolbarLayoutData priority="NeverOverflow"/>
                                            </layoutData>
                                        </Button>
                                        <Button
											id="deleteUserButton"
											icon="sap-icon://delete"
											tooltip="{i18n>deleteButtonText}"
											press=".onDelete">
                                            <layoutData>
                                                <OverflowToolbarLayoutData priority="NeverOverflow"/>
                                            </layoutData>
                                        </Button>
                                        <Button
                                            id="refreshUsersButton"
                                            icon="sap-icon://refresh"
                                            tooltip="{i18n>refreshButtonText}"
                                            enabled="{= !${appView>/hasUIChanges} }"
                                            press=".onRefresh"
                                        />
                                        <Button
											id="sortUsersButton"
											icon="sap-icon://sort"
                                            enabled="{= !${appView>/hasUIChanges} }"
											tooltip="{i18n>sortButtonText}"
											press="onSort"/>
                                    </content>
                                </OverflowToolbar>
                            </headerToolbar>
                            <columns>
                                <Column id="userNameColumn">
                                    <Text text="{i18n>userNameLabelText}"/>
                                </Column>
                                <Column id="firstNameColumn">
                                    <Text text="{i18n>firstNameLabelText}"/>
                                </Column>
                                <Column id="lastNameColumn">
                                    <Text text="{i18n>lastNameLabelText}"/>
                                </Column>
                                <Column id="ageColumn">
                                    <Text text="{i18n>ageLabelText}"/>
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem>
                                    <cells>
                                        <Input value="{UserName}" valueLiveUpdate="true"
                                            liveChange=".onInputChange"/>
                                        <Input value="{FirstName}" liveChange=".onInputChange"/>
                                        <Input value="{LastName}" liveChange=".onInputChange"/>
                                        <Input 
                                            value="{Age}"
                                            type="sap.ui.model.type.Integer"
                                            constraints="{nullable: false, minimum: 0}"
                                            change=".onAgeChange"
                                            valueLiveUpdate="true"
                                            liveChange=".onInputChange"
/>
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </content>
                    <footer>
                        <Toolbar visible="{appView>/hasUIChanges}">
                            <ToolbarSpacer/>
                            <Button
                                id="saveButton"
                                type="Emphasized"
                                text="{i18n>saveButtonText}"
                                enabled="{= ${message>/}.length === 0 &amp;&amp; ${appView>/usernameEmpty} === false }"
                                press=".onSave"/>
                            <Button
                                id="doneButton"
                                text="{i18n>cancelButtonText}"
                                press=".onResetChanges"/>
                        </Toolbar>
                    </footer>
                </Page>
            </pages>
        </App>
    </Shell>
</mvc:View>
<!-- 
-   Dịch vụ OData của chúng tôi cung cấp một thao tác OData: thao tác ResetDataSource. Trong bước này, chúng tôi thêm một nút để đặt lại tất cả các thay đổi dữ liệu đã thực hiện trong hướng dẫn về trạng thái ban đầu bằng thao tác này.
 -->